{% extends 'base.html' %}
{% block content  %}

<p>{{ user }}</p>
<p>{{ user.profile.first_name }} {{user.profile.last_name }}</p>
<p>{{ user.date_joined }}</p>
<p>{{ user.profile.current_city }}</p>

{% comment %} MODAL TRIGGER - EDIT PROFILE {% endcomment %}
<a class="waves-effect waves-light btn modal-trigger" href="#modal1">Edit Profile</a>

{% comment %} MODAL BODY - EDIT PROFILE {% endcomment %}
<div id="modal1" class="modal">
  <div class="modal-content">
    <h4>Edit Profile</h4>
    <form action="{% url 'profile_edit' %}" method="POST">
    {% csrf_token %}
      {{ profile_form.as_p }}
    </div>
    <div class="modal-footer">
      <input type="submit" value="Update">
    </form>
    </div>
  </div>

{% comment %} RENDER EVERY POST - MODAL TRIGGER {% endcomment %}
{% for post in posts %}

  <div class="card">
    <a class="modal-trigger" href="#post-modal">
        <div class="card-content">
          <p class="card-title">{{ post.title }} - <small>Posted by: {{user.profile.first_name}} {{user.profile.last_name}}</small></p>
          <p>{{ post.body }}</p>
        </div>
      </a>
  </div>


{% comment %} POST SHOW - MODAL BODY {% endcomment %}
<div id="post-modal" class="modal">
  <div class="modal-content">

    <div class="card">
      <div class="card-content">
        <p class="card-title">{{ post.title }} - <small>Posted by: {{user.profile.first_name}} {{user.profile.last_name}}</small></p>

        <p>{{ post.body }}</p>
      </div>
    </div>

    </div>
  </div>


{% endfor %}

<script>
  const edit_modal = document.querySelectorAll('.modal');
  M.Modal.init(edit_modal);
</script>

{% endblock content  %}